version: '2'

services:
  ipfs:
    image: airalab/ipfs-cloud 
    restart: always
    expose:
    - 5001
    volumes:
    - ipfsdata:/ipfs 

  parity:
    image: airalab/parity-cloud:unstable
    restart: always
    expose:
    - 8545
    environment:
    - CHAIN=kovan

  robot:
    build: .
    restart: always
    depends_on:
    - ipfs
    - parity
    volumes:
    - ./state:/home/ros/state
    environment:
    - IPFS_NODE=ipfs
    - PARITY_NODE=parity
    - PERIOD=60
    - MARKET_CONTRACT=0x6D73e187Eb0cFe2B0e1487C20481C866d3714d98

volumes:
  ipfsdata:
